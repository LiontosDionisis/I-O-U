<div class="min-h-screen bg-gradient-to-br from-blue-50 to-purple-100 p-4 flex flex-col items-center">

  <!-- Top Row: Left buttons | Center search | Right notifications -->
  <div class="w-full max-w-6xl flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-8">

    <!-- Left Column: Buttons -->
    <div class="flex flex-col gap-4 flex-none">
      <button [routerLink]="['/sessions']" class="px-6 py-3 bg-purple-600 text-white font-semibold rounded-xl hover:bg-purple-700 transition transform hover:scale-105 shadow-lg w-full md:w-auto">
        My Sessions
      </button>
      <button [routerLink]="['/profile']" class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition transform hover:scale-105 shadow-lg w-full md:w-auto">
        My Profile
      </button>
      <button (click)="logoutFunc()" class="px-6 py-3 bg-red-600 text-white font-semibold rounded-xl hover:bg-red-700 transition transform hover:scale-105 shadow-lg w-full md:w-auto">
        Logout
      </button>
    </div>

    <!-- Center Column: Search -->
    <div class="flex-1 max-w-xl w-full">
      <div class="relative search-container">
        <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg">üîç</span>
        <input type="text"
               placeholder="Find friends"
               class="w-full pl-10 pr-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-400 transition-all duration-300"
               (input)="updateQuery($any($event.target).value)" />
      </div>
      <div *ngIf="loading()" class="text-indigo-500 mt-1 text-sm text-center md:text-left">Searching...</div>
      <div *ngIf="errorMessage()" class="text-red-600 mt-1 text-sm text-center md:text-left">{{ errorMessage() }}</div>
    </div>

    <!-- Right Column: Notifications -->
    <div class="w-full md:w-80 bg-white rounded-xl shadow-lg p-4 mt-4 md:mt-0">
      <h2 class="text-lg font-bold mb-2 text-center md:text-left">Notifications</h2>

      <div *ngIf="loadingNotifications" class="text-gray-500 animate-pulse text-center md:text-left">Loading...</div>
      <div *ngIf="errorNotifications" class="text-red-500 text-center md:text-left">{{ errorNotifications }}</div>

      <ul *ngIf="notifications.length > 0" class="space-y-2 max-h-48 overflow-y-auto">
        <li *ngFor="let n of notifications" class="p-2 bg-gray-50 rounded-lg flex flex-col sm:flex-row sm:justify-between items-start sm:items-center gap-2">
          <span class="text-gray-700">{{ n.message }}</span>

          <!-- Friend request buttons -->
          <div *ngIf="isFriendRequest(n.message)" class="flex gap-2 mt-1 sm:mt-0">
            <button (click)="acceptFriendRequest(n.friendshipId, n.id)"
                    class="px-3 py-1 text-sm bg-green-500 hover:bg-green-600 text-white rounded-lg shadow">
              Accept
            </button>
            <button (click)="denyFriendRequest(n.friendshipId, n.id)"
                    class="px-3 py-1 text-sm bg-red-500 hover:bg-red-600 text-white rounded-lg shadow">
              Decline
            </button>
          </div>

          <!-- Delete button -->
          <button (click)="deleteNotification(n.id)" class="absolute top-2 right-2 text-gray-400 hover:text-red-500 transition">‚úï</button>
        </li>
      </ul>

      <div *ngIf="!loadingNotifications && notifications.length === 0" class="text-gray-500 text-sm text-center md:text-left mt-2">
        No notifications.
      </div>
    </div>
  </div>

  <!-- Search Results -->
  <div class="w-full max-w-6xl">
    <ul *ngIf="users().length > 0" class="space-y-2">
      <li *ngFor="let user of users()" class="flex flex-col md:flex-row items-center justify-between bg-gray-50 hover:bg-indigo-50 transition rounded-lg p-3 gap-3 md:gap-0">
        <div class="flex items-center gap-3">
          <img [src]="getAvatarUrl(user.avatar)" alt="Avatar" class="w-12 h-12 rounded-full border-2 border-indigo-300 shadow-sm">
          <span class="text-gray-700 font-medium">{{ user.username }}</span>
        </div>
        <button (click)="sendFriendRequest(user.id)" class="bg-indigo-500 text-white px-3 py-1 rounded-lg hover:bg-indigo-600 transition duration-300 mt-2 md:mt-0 w-full md:w-auto">
          Add Friend
        </button>
      </li>
    </ul>

    <div *ngIf="users().length === 0 && !loading()" class="text-gray-500 mt-2 text-center">
      No users found.
    </div>
  </div>

</div>
