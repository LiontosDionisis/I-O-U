2025-08-28 00:02:38 [Information] Request starting "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/expenses""" - "application/json" 242
2025-08-28 00:02:38 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)"'
2025-08-28 00:02:38 [Information] Route matched with "{action = \"CreateExpense\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateExpense(Api.IOU.DTOs.AddExpenseDTO)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:02:38 [Information] Executed DbCommand ("7"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s1`.`Id`, `s1`.`CreatedAt`, `s1`.`CreatedById`, `s1`.`Name`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s2`.`Email`, `s2`.`Password`, `s2`.`Username`, `s3`.`Id`, `s3`.`CreatedAt`, `s3`.`Description`, `s3`.`PaidById`, `s3`.`SessionId`, `s3`.`TotalAmount`, `s3`.`Id0`, `s3`.`Amount`, `s3`.`ExpenseId`, `s3`.`Status`, `s3`.`UserId`
FROM (
    SELECT `s`.`Id`, `s`.`CreatedAt`, `s`.`CreatedById`, `s`.`Name`
    FROM `Sessions` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `s1`
LEFT JOIN (
    SELECT `s0`.`SessionId`, `s0`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
    FROM `Sessionusers` AS `s0`
    INNER JOIN `Users` AS `u` ON `s0`.`UserId` = `u`.`Id`
) AS `s2` ON `s1`.`Id` = `s2`.`SessionId`
LEFT JOIN (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id` AS `Id0`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
    FROM `Expenses` AS `e`
    LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
) AS `s3` ON `s1`.`Id` = `s3`.`SessionId`
ORDER BY `s1`.`Id`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s3`.`Id`"
2025-08-28 00:02:38 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 500), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Expenses` (`CreatedAt`, `Description`, `PaidById`, `SessionId`, `TotalAmount`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Expenses`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();"
2025-08-28 00:02:38 [Information] Executed DbCommand ("1"ms) [Parameters=["@p5='?' (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `ExpenseSplits` (`Amount`, `ExpenseId`, `Status`, `UserId`)
VALUES (@p5, @p6, @p7, @p8);
SELECT `Id`
FROM `ExpenseSplits`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `ExpenseSplits` (`Amount`, `ExpenseId`, `Status`, `UserId`)
VALUES (@p9, @p10, @p11, @p12);
SELECT `Id`
FROM `ExpenseSplits`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();"
2025-08-28 00:02:38 [Information] Expense with ID 2 created in session 3
2025-08-28 00:02:38 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.Models.Expense"'.
2025-08-28 00:02:38 [Information] Executed action "Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)" in 82.3947ms
2025-08-28 00:02:38 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)"'
2025-08-28 00:02:38 [Error] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Session.CreatedBy.Sessions.Session.CreatedBy.Sessions.Session.CreatedBy.Sessions.Session.CreatedBy.Sessions.Session.CreatedBy.Sessions.Session.CreatedBy.Sessions.Session.CreatedBy.Sessions.Session.CreatedBy.Sessions.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-28 00:02:38 [Information] Request finished "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/expenses""" - 500 null "text/plain; charset=utf-8" 121.0292ms
2025-08-28 00:04:10 [Information] Application is shutting down...
2025-08-28 00:13:46 [Information] User profile is available. Using '"C:\Users\Dioni\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 00:13:46 [Information] Now listening on: "http://localhost:5062"
2025-08-28 00:13:46 [Information] Application started. Press Ctrl+C to shut down.
2025-08-28 00:13:46 [Information] Hosting environment: "Development"
2025-08-28 00:13:46 [Information] Content root path: "C:\Users\Dioni\OneDrive\Desktop\Projects\IOU\api\iou"
2025-08-28 00:13:46 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/swagger/index.html""" - null null
2025-08-28 00:13:46 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/swagger/index.html""" - 200 null "text/html;charset=utf-8" 77.7853ms
2025-08-28 00:13:46 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/swagger/v1/swagger.json""" - null null
2025-08-28 00:13:46 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 80.8635ms
2025-08-28 00:14:04 [Information] Request starting "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/user/login""" - "application/json" 63
2025-08-28 00:14:04 [Warning] Failed to determine the https port for redirect.
2025-08-28 00:14:04 [Information] Executing endpoint '"Api.IOU.Controllers.UserController.Login (IOU)"'
2025-08-28 00:14:04 [Information] Route matched with "{action = \"Login\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Api.IOU.DTOs.LoginDTO)" on controller "Api.IOU.Controllers.UserController" ("IOU").
2025-08-28 00:14:06 [Information] Executed DbCommand ("61"ms) [Parameters=["@__username_0='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SELECT `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
FROM `Users` AS `u`
WHERE `u`.`Username` = @__username_0
LIMIT 1"
2025-08-28 00:14:06 [Information] User "test2" logged in successfully at 08/27/2025 21:14:06
2025-08-28 00:14:06 [Information] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType5`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
2025-08-28 00:14:06 [Information] Executed action "Api.IOU.Controllers.UserController.Login (IOU)" in 1816.5706ms
2025-08-28 00:14:06 [Information] Executed endpoint '"Api.IOU.Controllers.UserController.Login (IOU)"'
2025-08-28 00:14:06 [Information] Request finished "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/user/login""" - 200 null "application/json; charset=utf-8" 1902.768ms
2025-08-28 00:14:33 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/sessions/3""" - null null
2025-08-28 00:14:33 [Information] Executing endpoint '"Api.IOU.Controllers.SessionController.GetParticiapnts (IOU)"'
2025-08-28 00:14:33 [Information] Route matched with "{action = \"GetParticiapnts\", controller = \"Session\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetParticiapnts(Int32)" on controller "Api.IOU.Controllers.SessionController" ("IOU").
2025-08-28 00:14:33 [Warning] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-28 00:14:33 [Information] Executed DbCommand ("24"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s1`.`Id`, `s1`.`CreatedAt`, `s1`.`CreatedById`, `s1`.`Name`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s2`.`Email`, `s2`.`Password`, `s2`.`Username`, `s3`.`Id`, `s3`.`CreatedAt`, `s3`.`Description`, `s3`.`PaidById`, `s3`.`SessionId`, `s3`.`TotalAmount`, `s3`.`Id0`, `s3`.`Amount`, `s3`.`ExpenseId`, `s3`.`Status`, `s3`.`UserId`
FROM (
    SELECT `s`.`Id`, `s`.`CreatedAt`, `s`.`CreatedById`, `s`.`Name`
    FROM `Sessions` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `s1`
LEFT JOIN (
    SELECT `s0`.`SessionId`, `s0`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
    FROM `Sessionusers` AS `s0`
    INNER JOIN `Users` AS `u` ON `s0`.`UserId` = `u`.`Id`
) AS `s2` ON `s1`.`Id` = `s2`.`SessionId`
LEFT JOIN (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id` AS `Id0`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
    FROM `Expenses` AS `e`
    LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
) AS `s3` ON `s1`.`Id` = `s3`.`SessionId`
ORDER BY `s1`.`Id`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s3`.`Id`"
2025-08-28 00:14:34 [Information] Executed DbCommand ("1"ms) [Parameters=["@__sessionId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s`.`SessionId`, `s`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
FROM `Sessionusers` AS `s`
INNER JOIN `Users` AS `u` ON `s`.`UserId` = `u`.`Id`
WHERE `s`.`SessionId` = @__sessionId_0"
2025-08-28 00:14:34 [Information] Executing "OkObjectResult", writing value of type '"System.Linq.Enumerable+ListSelectIterator`2[[api.IOU.Models.SessionUser, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Api.IOU.DTOs.UserDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 00:14:34 [Information] Executed action "Api.IOU.Controllers.SessionController.GetParticiapnts (IOU)" in 204.0352ms
2025-08-28 00:14:34 [Information] Executed endpoint '"Api.IOU.Controllers.SessionController.GetParticiapnts (IOU)"'
2025-08-28 00:14:34 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/sessions/3""" - 200 null "application/json; charset=utf-8" 247.4918ms
2025-08-28 00:16:23 [Information] Request starting "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/expenses""" - "application/json" 117
2025-08-28 00:16:23 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)"'
2025-08-28 00:16:23 [Information] Route matched with "{action = \"CreateExpense\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateExpense(Api.IOU.DTOs.AddExpenseDTO)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:16:23 [Information] Executed DbCommand ("2"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s1`.`Id`, `s1`.`CreatedAt`, `s1`.`CreatedById`, `s1`.`Name`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s2`.`Email`, `s2`.`Password`, `s2`.`Username`, `s3`.`Id`, `s3`.`CreatedAt`, `s3`.`Description`, `s3`.`PaidById`, `s3`.`SessionId`, `s3`.`TotalAmount`, `s3`.`Id0`, `s3`.`Amount`, `s3`.`ExpenseId`, `s3`.`Status`, `s3`.`UserId`
FROM (
    SELECT `s`.`Id`, `s`.`CreatedAt`, `s`.`CreatedById`, `s`.`Name`
    FROM `Sessions` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `s1`
LEFT JOIN (
    SELECT `s0`.`SessionId`, `s0`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
    FROM `Sessionusers` AS `s0`
    INNER JOIN `Users` AS `u` ON `s0`.`UserId` = `u`.`Id`
) AS `s2` ON `s1`.`Id` = `s2`.`SessionId`
LEFT JOIN (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id` AS `Id0`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
    FROM `Expenses` AS `e`
    LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
) AS `s3` ON `s1`.`Id` = `s3`.`SessionId`
ORDER BY `s1`.`Id`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s3`.`Id`"
2025-08-28 00:16:23 [Information] Executed DbCommand ("17"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 500), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Expenses` (`CreatedAt`, `Description`, `PaidById`, `SessionId`, `TotalAmount`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Expenses`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();"
2025-08-28 00:16:23 [Information] Executed DbCommand ("2"ms) [Parameters=["@p5='?' (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `ExpenseSplits` (`Amount`, `ExpenseId`, `Status`, `UserId`)
VALUES (@p5, @p6, @p7, @p8);
SELECT `Id`
FROM `ExpenseSplits`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `ExpenseSplits` (`Amount`, `ExpenseId`, `Status`, `UserId`)
VALUES (@p9, @p10, @p11, @p12);
SELECT `Id`
FROM `ExpenseSplits`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();"
2025-08-28 00:16:23 [Information] Expense with ID 3 created in session 3
2025-08-28 00:16:23 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseDTO"'.
2025-08-28 00:16:23 [Information] Executed action "Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)" in 217.3878ms
2025-08-28 00:16:23 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)"'
2025-08-28 00:16:23 [Information] Request finished "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/expenses""" - 200 null "application/json; charset=utf-8" 229.9709ms
2025-08-28 00:16:56 [Information] Request starting "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/1/settle""" - null 0
2025-08-28 00:16:56 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:16:56 [Information] Route matched with "{action = \"SettleSplit\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SettleSplit(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:16:56 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:16:56 [Information] Executed DbCommand ("5"ms) [Parameters=["@p4='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET AUTOCOMMIT = 1;
UPDATE `ExpenseSplits` SET `Amount` = @p0, `ExpenseId` = @p1, `Status` = @p2, `UserId` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();"
2025-08-28 00:16:56 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.Models.ExpenseSplit"'.
2025-08-28 00:16:56 [Information] Executed action "Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)" in 47.1432ms
2025-08-28 00:16:56 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:16:56 [Error] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-28 00:16:56 [Information] Request finished "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/1/settle""" - 500 null "text/plain; charset=utf-8" 100.2149ms
2025-08-28 00:18:15 [Information] Request starting "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/expenses""" - "application/json" 252
2025-08-28 00:18:15 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)"'
2025-08-28 00:18:15 [Information] Route matched with "{action = \"CreateExpense\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateExpense(Api.IOU.DTOs.AddExpenseDTO)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:18:15 [Information] Executed DbCommand ("4"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s1`.`Id`, `s1`.`CreatedAt`, `s1`.`CreatedById`, `s1`.`Name`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s2`.`Email`, `s2`.`Password`, `s2`.`Username`, `s3`.`Id`, `s3`.`CreatedAt`, `s3`.`Description`, `s3`.`PaidById`, `s3`.`SessionId`, `s3`.`TotalAmount`, `s3`.`Id0`, `s3`.`Amount`, `s3`.`ExpenseId`, `s3`.`Status`, `s3`.`UserId`
FROM (
    SELECT `s`.`Id`, `s`.`CreatedAt`, `s`.`CreatedById`, `s`.`Name`
    FROM `Sessions` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `s1`
LEFT JOIN (
    SELECT `s0`.`SessionId`, `s0`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
    FROM `Sessionusers` AS `s0`
    INNER JOIN `Users` AS `u` ON `s0`.`UserId` = `u`.`Id`
) AS `s2` ON `s1`.`Id` = `s2`.`SessionId`
LEFT JOIN (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id` AS `Id0`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
    FROM `Expenses` AS `e`
    LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
) AS `s3` ON `s1`.`Id` = `s3`.`SessionId`
ORDER BY `s1`.`Id`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s3`.`Id`"
2025-08-28 00:18:15 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 500), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Expenses` (`CreatedAt`, `Description`, `PaidById`, `SessionId`, `TotalAmount`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Expenses`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();"
2025-08-28 00:18:15 [Information] Executed DbCommand ("1"ms) [Parameters=["@p5='?' (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `ExpenseSplits` (`Amount`, `ExpenseId`, `Status`, `UserId`)
VALUES (@p5, @p6, @p7, @p8);
SELECT `Id`
FROM `ExpenseSplits`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `ExpenseSplits` (`Amount`, `ExpenseId`, `Status`, `UserId`)
VALUES (@p9, @p10, @p11, @p12);
SELECT `Id`
FROM `ExpenseSplits`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();"
2025-08-28 00:18:15 [Information] Expense with ID 4 created in session 3
2025-08-28 00:18:15 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseDTO"'.
2025-08-28 00:18:15 [Information] Executed action "Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)" in 32.0456ms
2025-08-28 00:18:15 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)"'
2025-08-28 00:18:15 [Information] Request finished "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/expenses""" - 200 null "application/json; charset=utf-8" 38.67ms
2025-08-28 00:18:56 [Information] Request starting "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/4/settle""" - null 0
2025-08-28 00:18:56 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:18:56 [Information] Route matched with "{action = \"SettleSplit\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SettleSplit(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:18:56 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:18:56 [Information] Executed DbCommand ("3"ms) [Parameters=["@p4='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET AUTOCOMMIT = 1;
UPDATE `ExpenseSplits` SET `Amount` = @p0, `ExpenseId` = @p1, `Status` = @p2, `UserId` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();"
2025-08-28 00:18:56 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.Models.ExpenseSplit"'.
2025-08-28 00:18:56 [Information] Executed action "Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)" in 22.6474ms
2025-08-28 00:18:56 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:18:56 [Error] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Splits.Expense.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-28 00:18:56 [Information] Request finished "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/4/settle""" - 500 null "text/plain; charset=utf-8" 57.0393ms
2025-08-28 00:23:12 [Information] Application is shutting down...
2025-08-28 00:23:19 [Information] User profile is available. Using '"C:\Users\Dioni\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 00:23:19 [Information] Now listening on: "http://localhost:5062"
2025-08-28 00:23:19 [Information] Application started. Press Ctrl+C to shut down.
2025-08-28 00:23:19 [Information] Hosting environment: "Development"
2025-08-28 00:23:19 [Information] Content root path: "C:\Users\Dioni\OneDrive\Desktop\Projects\IOU\api\iou"
2025-08-28 00:23:21 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/swagger/v1/swagger.json""" - null null
2025-08-28 00:23:21 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 216.1008ms
2025-08-28 00:23:39 [Information] Request starting "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/user/login""" - "application/json" 63
2025-08-28 00:23:39 [Warning] Failed to determine the https port for redirect.
2025-08-28 00:23:39 [Information] Executing endpoint '"Api.IOU.Controllers.UserController.Login (IOU)"'
2025-08-28 00:23:39 [Information] Route matched with "{action = \"Login\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Api.IOU.DTOs.LoginDTO)" on controller "Api.IOU.Controllers.UserController" ("IOU").
2025-08-28 00:23:40 [Information] Executed DbCommand ("68"ms) [Parameters=["@__username_0='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SELECT `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
FROM `Users` AS `u`
WHERE `u`.`Username` = @__username_0
LIMIT 1"
2025-08-28 00:23:41 [Information] User "test2" logged in successfully at 08/27/2025 21:23:41
2025-08-28 00:23:41 [Information] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType5`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
2025-08-28 00:23:41 [Information] Executed action "Api.IOU.Controllers.UserController.Login (IOU)" in 1864.5367ms
2025-08-28 00:23:41 [Information] Executed endpoint '"Api.IOU.Controllers.UserController.Login (IOU)"'
2025-08-28 00:23:41 [Information] Request finished "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/user/login""" - 200 null "application/json; charset=utf-8" 1943.6729ms
2025-08-28 00:24:04 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3""" - null null
2025-08-28 00:24:04 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)"'
2025-08-28 00:24:04 [Information] Route matched with "{action = \"GetExpensesBySession\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetExpensesBySession(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:24:04 [Information] Executed DbCommand ("14"ms) [Parameters=["@__sessionId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM `Expenses` AS `e`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
WHERE `e`.`SessionId` = @__sessionId_0
ORDER BY `e`.`Id`"
2025-08-28 00:24:04 [Information] Executing "OkObjectResult", writing value of type '"System.Linq.Enumerable+ListSelectIterator`2[[Api.IOU.Models.Expense, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Api.IOU.DTOs.ExpenseDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 00:24:04 [Information] Executed action "Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)" in 149.081ms
2025-08-28 00:24:04 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)"'
2025-08-28 00:24:04 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3""" - 200 null "application/json; charset=utf-8" 193.1232ms
2025-08-28 00:24:38 [Information] Request starting "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/4/settle""" - null 0
2025-08-28 00:24:38 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:24:38 [Information] Route matched with "{action = \"SettleSplit\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SettleSplit(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:24:38 [Information] Executed DbCommand ("4"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:24:38 [Information] Executed DbCommand ("6"ms) [Parameters=["@p4='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET AUTOCOMMIT = 1;
UPDATE `ExpenseSplits` SET `Amount` = @p0, `ExpenseId` = @p1, `Status` = @p2, `UserId` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();"
2025-08-28 00:24:38 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseSplitDTO"'.
2025-08-28 00:24:38 [Information] Executed action "Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)" in 145.4015ms
2025-08-28 00:24:38 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:24:38 [Information] Request finished "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/4/settle""" - 200 null "application/json; charset=utf-8" 164.7679ms
2025-08-28 00:26:39 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3""" - null null
2025-08-28 00:26:39 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)"'
2025-08-28 00:26:39 [Information] Route matched with "{action = \"GetExpensesBySession\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetExpensesBySession(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:26:39 [Information] Executed DbCommand ("1"ms) [Parameters=["@__sessionId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM `Expenses` AS `e`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
WHERE `e`.`SessionId` = @__sessionId_0
ORDER BY `e`.`Id`"
2025-08-28 00:26:39 [Information] Executing "OkObjectResult", writing value of type '"System.Linq.Enumerable+ListSelectIterator`2[[Api.IOU.Models.Expense, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Api.IOU.DTOs.ExpenseDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 00:26:39 [Information] Executed action "Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)" in 16.515ms
2025-08-28 00:26:39 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)"'
2025-08-28 00:26:39 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3""" - 200 null "application/json; charset=utf-8" 27.8832ms
2025-08-28 00:27:00 [Information] Request starting "HTTP/1.1" "DELETE" "http"://"localhost:5062""""/api/expenses/4""" - null null
2025-08-28 00:27:00 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)"'
2025-08-28 00:27:00 [Information] Route matched with "{action = \"DeleteExpense\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteExpense(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:27:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:27:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM `ExpenseSplits`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

DELETE FROM `ExpenseSplits`
WHERE `Id` = @p1;
SELECT ROW_COUNT();

DELETE FROM `Expenses`
WHERE `Id` = @p2;
SELECT ROW_COUNT();"
2025-08-28 00:27:00 [Information] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
2025-08-28 00:27:00 [Information] Executed action "Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)" in 76.5676ms
2025-08-28 00:27:00 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)"'
2025-08-28 00:27:00 [Information] Request finished "HTTP/1.1" "DELETE" "http"://"localhost:5062""""/api/expenses/4""" - 200 null "application/json; charset=utf-8" 85.2584ms
2025-08-28 00:27:11 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/friendship/friends""" - null null
2025-08-28 00:27:11 [Information] Executing endpoint '"Api.IOU.Controllers.FriendshipController.GetFriends (IOU)"'
2025-08-28 00:27:11 [Information] Route matched with "{action = \"GetFriends\", controller = \"Friendship\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFriends()" on controller "Api.IOU.Controllers.FriendshipController" ("IOU").
2025-08-28 00:27:11 [Information] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `f`.`Id`, `f`.`FriendId`, `f`.`Status`, `f`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`, `u0`.`Id`, `u0`.`Email`, `u0`.`Password`, `u0`.`Username`
FROM `Friendships` AS `f`
INNER JOIN `Users` AS `u` ON `f`.`UserId` = `u`.`Id`
INNER JOIN `Users` AS `u0` ON `f`.`FriendId` = `u0`.`Id`
WHERE (`f`.`UserId` = @__userId_0) OR (`f`.`FriendId` = @__userId_0)"
2025-08-28 00:27:11 [Information] Friendlist for user with ID 7 was found and returned
2025-08-28 00:27:11 [Information] Executing "OkObjectResult", writing value of type '"System.Linq.Enumerable+ListWhereSelectIterator`2[[Api.IOU.Models.Friendship, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Api.IOU.DTOs.FriendshipDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 00:27:11 [Information] Executed action "Api.IOU.Controllers.FriendshipController.GetFriends (IOU)" in 46.3063ms
2025-08-28 00:27:11 [Information] Executed endpoint '"Api.IOU.Controllers.FriendshipController.GetFriends (IOU)"'
2025-08-28 00:27:11 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/friendship/friends""" - 200 null "application/json; charset=utf-8" 55.5888ms
2025-08-28 00:27:20 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/friendship/pending""" - null null
2025-08-28 00:27:20 [Information] Executing endpoint '"Api.IOU.Controllers.FriendshipController.GetPendingRequests (IOU)"'
2025-08-28 00:27:20 [Information] Route matched with "{action = \"GetPendingRequests\", controller = \"Friendship\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPendingRequests()" on controller "Api.IOU.Controllers.FriendshipController" ("IOU").
2025-08-28 00:27:20 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `f`.`Id`, `f`.`FriendId`, `f`.`Status`, `f`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`, `u0`.`Id`, `u0`.`Email`, `u0`.`Password`, `u0`.`Username`
FROM `Friendships` AS `f`
INNER JOIN `Users` AS `u` ON `f`.`UserId` = `u`.`Id`
INNER JOIN `Users` AS `u0` ON `f`.`FriendId` = `u0`.`Id`
WHERE (`f`.`UserId` = @__userId_0) OR (`f`.`FriendId` = @__userId_0)"
2025-08-28 00:27:20 [Information] Friend requestes for user with ID 7 were found and returned
2025-08-28 00:27:20 [Information] Executing "OkObjectResult", writing value of type '"System.Linq.Enumerable+ListWhereSelectIterator`2[[Api.IOU.Models.Friendship, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Api.IOU.DTOs.FriendshipDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 00:27:20 [Information] Executed action "Api.IOU.Controllers.FriendshipController.GetPendingRequests (IOU)" in 9.0773ms
2025-08-28 00:27:20 [Information] Executed endpoint '"Api.IOU.Controllers.FriendshipController.GetPendingRequests (IOU)"'
2025-08-28 00:27:20 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/friendship/pending""" - 200 null "application/json; charset=utf-8" 17.2335ms
2025-08-28 00:27:41 [Information] Application is shutting down...
2025-08-28 00:36:54 [Information] User profile is available. Using '"C:\Users\Dioni\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 00:36:54 [Information] Now listening on: "http://localhost:5062"
2025-08-28 00:36:54 [Information] Application started. Press Ctrl+C to shut down.
2025-08-28 00:36:54 [Information] Hosting environment: "Development"
2025-08-28 00:36:54 [Information] Content root path: "C:\Users\Dioni\OneDrive\Desktop\Projects\IOU\api\iou"
2025-08-28 00:36:59 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/swagger/v1/swagger.json""" - null null
2025-08-28 00:36:59 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 118.5162ms
2025-08-28 00:37:24 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/""" - null null
2025-08-28 00:37:24 [Warning] Failed to determine the https port for redirect.
2025-08-28 00:37:25 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/""" - 404 0 null 49.9166ms
2025-08-28 00:37:25 [Information] Request reached the end of the middleware pipeline without being handled by application code. Request path: "GET" "http"://"localhost:5062""""/", Response status code: 404
2025-08-28 00:37:36 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/swagger/v1/swagger.json""" - null null
2025-08-28 00:37:36 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 7.2424ms
2025-08-28 00:37:54 [Information] Request starting "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/user/login""" - "application/json" 63
2025-08-28 00:37:54 [Information] Executing endpoint '"Api.IOU.Controllers.UserController.Login (IOU)"'
2025-08-28 00:37:54 [Information] Route matched with "{action = \"Login\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Api.IOU.DTOs.LoginDTO)" on controller "Api.IOU.Controllers.UserController" ("IOU").
2025-08-28 00:37:55 [Information] Executed DbCommand ("48"ms) [Parameters=["@__username_0='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SELECT `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
FROM `Users` AS `u`
WHERE `u`.`Username` = @__username_0
LIMIT 1"
2025-08-28 00:37:56 [Information] User "test2" logged in successfully at 08/27/2025 21:37:56
2025-08-28 00:37:56 [Information] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType5`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
2025-08-28 00:37:56 [Information] Executed action "Api.IOU.Controllers.UserController.Login (IOU)" in 1467.6336ms
2025-08-28 00:37:56 [Information] Executed endpoint '"Api.IOU.Controllers.UserController.Login (IOU)"'
2025-08-28 00:37:56 [Information] Request finished "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/user/login""" - 200 null "application/json; charset=utf-8" 1508.9334ms
2025-08-28 00:38:29 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3/balances""" - null null
2025-08-28 00:38:29 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.GetBalances (IOU)"'
2025-08-28 00:38:29 [Information] Route matched with "{action = \"GetBalances\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBalances(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:38:29 [Warning] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-28 00:38:29 [Information] Executed DbCommand ("14"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s1`.`Id`, `s1`.`CreatedAt`, `s1`.`CreatedById`, `s1`.`Name`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s2`.`Email`, `s2`.`Password`, `s2`.`Username`, `s3`.`Id`, `s3`.`CreatedAt`, `s3`.`Description`, `s3`.`PaidById`, `s3`.`SessionId`, `s3`.`TotalAmount`, `s3`.`Id0`, `s3`.`Amount`, `s3`.`ExpenseId`, `s3`.`Status`, `s3`.`UserId`
FROM (
    SELECT `s`.`Id`, `s`.`CreatedAt`, `s`.`CreatedById`, `s`.`Name`
    FROM `Sessions` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `s1`
LEFT JOIN (
    SELECT `s0`.`SessionId`, `s0`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
    FROM `Sessionusers` AS `s0`
    INNER JOIN `Users` AS `u` ON `s0`.`UserId` = `u`.`Id`
) AS `s2` ON `s1`.`Id` = `s2`.`SessionId`
LEFT JOIN (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id` AS `Id0`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
    FROM `Expenses` AS `e`
    LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
) AS `s3` ON `s1`.`Id` = `s3`.`SessionId`
ORDER BY `s1`.`Id`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s3`.`Id`"
2025-08-28 00:38:30 [Information] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.IOU.DTOs.BalanceDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 00:38:30 [Information] Executed action "Api.IOU.Controllers.ExpenseController.GetBalances (IOU)" in 182.8358ms
2025-08-28 00:38:30 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.GetBalances (IOU)"'
2025-08-28 00:38:30 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3/balances""" - 200 null "application/json; charset=utf-8" 224.3184ms
2025-08-28 00:38:55 [Information] Request starting "HTTP/1.1" "DELETE" "http"://"localhost:5062""""/api/expenses/1""" - null null
2025-08-28 00:38:55 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)"'
2025-08-28 00:38:55 [Information] Route matched with "{action = \"DeleteExpense\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteExpense(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:38:55 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:38:55 [Information] Executing ForbidResult with authentication schemes (["Only the payer can delete an expense"]).
2025-08-28 00:38:55 [Information] Executed action "Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)" in 64.1433ms
2025-08-28 00:38:55 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)"'
2025-08-28 00:38:55 [Error] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authentication handler is registered for the scheme 'Only the payer can delete an expense'. The registered schemes are: Bearer. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("Only the payer can delete an expense",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ForbidAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Mvc.ForbidResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-28 00:38:55 [Information] Request finished "HTTP/1.1" "DELETE" "http"://"localhost:5062""""/api/expenses/1""" - 500 null "text/plain; charset=utf-8" 98.7636ms
2025-08-28 00:39:00 [Information] Request starting "HTTP/1.1" "DELETE" "http"://"localhost:5062""""/api/expenses/2""" - null null
2025-08-28 00:39:00 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)"'
2025-08-28 00:39:00 [Information] Route matched with "{action = \"DeleteExpense\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteExpense(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:39:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:39:00 [Information] Executed DbCommand ("7"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM `ExpenseSplits`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

DELETE FROM `ExpenseSplits`
WHERE `Id` = @p1;
SELECT ROW_COUNT();

DELETE FROM `Expenses`
WHERE `Id` = @p2;
SELECT ROW_COUNT();"
2025-08-28 00:39:00 [Information] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
2025-08-28 00:39:00 [Information] Executed action "Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)" in 115.5864ms
2025-08-28 00:39:00 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)"'
2025-08-28 00:39:00 [Information] Request finished "HTTP/1.1" "DELETE" "http"://"localhost:5062""""/api/expenses/2""" - 200 null "application/json; charset=utf-8" 123.4376ms
2025-08-28 00:39:04 [Information] Request starting "HTTP/1.1" "DELETE" "http"://"localhost:5062""""/api/expenses/3""" - null null
2025-08-28 00:39:04 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)"'
2025-08-28 00:39:04 [Information] Route matched with "{action = \"DeleteExpense\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteExpense(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:39:04 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:39:04 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM `ExpenseSplits`
WHERE `Id` = @p0;
SELECT ROW_COUNT();

DELETE FROM `ExpenseSplits`
WHERE `Id` = @p1;
SELECT ROW_COUNT();

DELETE FROM `Expenses`
WHERE `Id` = @p2;
SELECT ROW_COUNT();"
2025-08-28 00:39:04 [Information] Executing "OkObjectResult", writing value of type '"<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
2025-08-28 00:39:04 [Information] Executed action "Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)" in 14.7159ms
2025-08-28 00:39:04 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)"'
2025-08-28 00:39:04 [Information] Request finished "HTTP/1.1" "DELETE" "http"://"localhost:5062""""/api/expenses/3""" - 200 null "application/json; charset=utf-8" 20.9328ms
2025-08-28 00:39:08 [Information] Request starting "HTTP/1.1" "DELETE" "http"://"localhost:5062""""/api/expenses/4""" - null null
2025-08-28 00:39:08 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)"'
2025-08-28 00:39:08 [Information] Route matched with "{action = \"DeleteExpense\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteExpense(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:39:08 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:39:08 [Information] Executing "NotFoundObjectResult", writing value of type '"System.String"'.
2025-08-28 00:39:08 [Information] Executed action "Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)" in 22.9435ms
2025-08-28 00:39:08 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)"'
2025-08-28 00:39:08 [Information] Request finished "HTTP/1.1" "DELETE" "http"://"localhost:5062""""/api/expenses/4""" - 404 null "text/plain; charset=utf-8" 30.0298ms
2025-08-28 00:39:11 [Information] Request starting "HTTP/1.1" "DELETE" "http"://"localhost:5062""""/api/expenses/1""" - null null
2025-08-28 00:39:11 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)"'
2025-08-28 00:39:11 [Information] Route matched with "{action = \"DeleteExpense\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteExpense(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:39:11 [Information] Executed DbCommand ("2"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:39:11 [Information] Executing ForbidResult with authentication schemes (["Only the payer can delete an expense"]).
2025-08-28 00:39:11 [Information] Executed action "Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)" in 13.4922ms
2025-08-28 00:39:11 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.DeleteExpense (IOU)"'
2025-08-28 00:39:11 [Error] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authentication handler is registered for the scheme 'Only the payer can delete an expense'. The registered schemes are: Bearer. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("Only the payer can delete an expense",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ForbidAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Mvc.ForbidResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-28 00:39:11 [Information] Request finished "HTTP/1.1" "DELETE" "http"://"localhost:5062""""/api/expenses/1""" - 500 null "text/plain; charset=utf-8" 34.4427ms
2025-08-28 00:39:32 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3""" - null null
2025-08-28 00:39:32 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)"'
2025-08-28 00:39:32 [Information] Route matched with "{action = \"GetExpensesBySession\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetExpensesBySession(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:39:32 [Information] Executed DbCommand ("4"ms) [Parameters=["@__sessionId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM `Expenses` AS `e`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
WHERE `e`.`SessionId` = @__sessionId_0
ORDER BY `e`.`Id`"
2025-08-28 00:39:32 [Information] Executing "OkObjectResult", writing value of type '"System.Linq.Enumerable+ListSelectIterator`2[[Api.IOU.Models.Expense, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Api.IOU.DTOs.ExpenseDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 00:39:32 [Information] Executed action "Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)" in 29.7815ms
2025-08-28 00:39:32 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)"'
2025-08-28 00:39:32 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3""" - 200 null "application/json; charset=utf-8" 40.9473ms
2025-08-28 00:40:23 [Information] Request starting "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/expenses""" - "application/json" 121
2025-08-28 00:40:23 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)"'
2025-08-28 00:40:23 [Information] Route matched with "{action = \"CreateExpense\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateExpense(Api.IOU.DTOs.AddExpenseDTO)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:40:23 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s1`.`Id`, `s1`.`CreatedAt`, `s1`.`CreatedById`, `s1`.`Name`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s2`.`Email`, `s2`.`Password`, `s2`.`Username`, `s3`.`Id`, `s3`.`CreatedAt`, `s3`.`Description`, `s3`.`PaidById`, `s3`.`SessionId`, `s3`.`TotalAmount`, `s3`.`Id0`, `s3`.`Amount`, `s3`.`ExpenseId`, `s3`.`Status`, `s3`.`UserId`
FROM (
    SELECT `s`.`Id`, `s`.`CreatedAt`, `s`.`CreatedById`, `s`.`Name`
    FROM `Sessions` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `s1`
LEFT JOIN (
    SELECT `s0`.`SessionId`, `s0`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
    FROM `Sessionusers` AS `s0`
    INNER JOIN `Users` AS `u` ON `s0`.`UserId` = `u`.`Id`
) AS `s2` ON `s1`.`Id` = `s2`.`SessionId`
LEFT JOIN (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id` AS `Id0`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
    FROM `Expenses` AS `e`
    LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
) AS `s3` ON `s1`.`Id` = `s3`.`SessionId`
ORDER BY `s1`.`Id`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s3`.`Id`"
2025-08-28 00:40:23 [Information] Executed DbCommand ("10"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 500), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Expenses` (`CreatedAt`, `Description`, `PaidById`, `SessionId`, `TotalAmount`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Expenses`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();"
2025-08-28 00:40:23 [Information] Executed DbCommand ("1"ms) [Parameters=["@p5='?' (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `ExpenseSplits` (`Amount`, `ExpenseId`, `Status`, `UserId`)
VALUES (@p5, @p6, @p7, @p8);
SELECT `Id`
FROM `ExpenseSplits`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `ExpenseSplits` (`Amount`, `ExpenseId`, `Status`, `UserId`)
VALUES (@p9, @p10, @p11, @p12);
SELECT `Id`
FROM `ExpenseSplits`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();"
2025-08-28 00:40:23 [Information] Expense with ID 5 created in session 3
2025-08-28 00:40:23 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseDTO"'.
2025-08-28 00:40:23 [Information] Executed action "Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)" in 85.8376ms
2025-08-28 00:40:23 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)"'
2025-08-28 00:40:23 [Information] Request finished "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/expenses""" - 200 null "application/json; charset=utf-8" 95.2776ms
2025-08-28 00:40:33 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3/balances""" - null null
2025-08-28 00:40:33 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.GetBalances (IOU)"'
2025-08-28 00:40:33 [Information] Route matched with "{action = \"GetBalances\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBalances(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:40:33 [Information] Executed DbCommand ("2"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s1`.`Id`, `s1`.`CreatedAt`, `s1`.`CreatedById`, `s1`.`Name`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s2`.`Email`, `s2`.`Password`, `s2`.`Username`, `s3`.`Id`, `s3`.`CreatedAt`, `s3`.`Description`, `s3`.`PaidById`, `s3`.`SessionId`, `s3`.`TotalAmount`, `s3`.`Id0`, `s3`.`Amount`, `s3`.`ExpenseId`, `s3`.`Status`, `s3`.`UserId`
FROM (
    SELECT `s`.`Id`, `s`.`CreatedAt`, `s`.`CreatedById`, `s`.`Name`
    FROM `Sessions` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `s1`
LEFT JOIN (
    SELECT `s0`.`SessionId`, `s0`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
    FROM `Sessionusers` AS `s0`
    INNER JOIN `Users` AS `u` ON `s0`.`UserId` = `u`.`Id`
) AS `s2` ON `s1`.`Id` = `s2`.`SessionId`
LEFT JOIN (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id` AS `Id0`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
    FROM `Expenses` AS `e`
    LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
) AS `s3` ON `s1`.`Id` = `s3`.`SessionId`
ORDER BY `s1`.`Id`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s3`.`Id`"
2025-08-28 00:40:33 [Information] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.IOU.DTOs.BalanceDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 00:40:33 [Information] Executed action "Api.IOU.Controllers.ExpenseController.GetBalances (IOU)" in 9.9275ms
2025-08-28 00:40:33 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.GetBalances (IOU)"'
2025-08-28 00:40:33 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3/balances""" - 200 null "application/json; charset=utf-8" 19.9822ms
2025-08-28 00:41:06 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3""" - null null
2025-08-28 00:41:06 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)"'
2025-08-28 00:41:06 [Information] Route matched with "{action = \"GetExpensesBySession\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetExpensesBySession(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:41:06 [Information] Executed DbCommand ("3"ms) [Parameters=["@__sessionId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM `Expenses` AS `e`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
WHERE `e`.`SessionId` = @__sessionId_0
ORDER BY `e`.`Id`"
2025-08-28 00:41:06 [Information] Executing "OkObjectResult", writing value of type '"System.Linq.Enumerable+ListSelectIterator`2[[Api.IOU.Models.Expense, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Api.IOU.DTOs.ExpenseDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 00:41:06 [Information] Executed action "Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)" in 12.6428ms
2025-08-28 00:41:06 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)"'
2025-08-28 00:41:06 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3""" - 200 null "application/json; charset=utf-8" 24.7307ms
2025-08-28 00:41:40 [Information] Request starting "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - null 0
2025-08-28 00:41:40 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:41:40 [Information] Route matched with "{action = \"SettleSplit\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SettleSplit(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:41:40 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:41:40 [Information] Executed DbCommand ("5"ms) [Parameters=["@p4='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET AUTOCOMMIT = 1;
UPDATE `ExpenseSplits` SET `Amount` = @p0, `ExpenseId` = @p1, `Status` = @p2, `UserId` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();"
2025-08-28 00:41:40 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseSplitDTO"'.
2025-08-28 00:41:40 [Information] Executed action "Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)" in 20.4907ms
2025-08-28 00:41:40 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:41:40 [Information] Request finished "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - 200 null "application/json; charset=utf-8" 34.5154ms
2025-08-28 00:41:52 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3/balances""" - null null
2025-08-28 00:41:52 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.GetBalances (IOU)"'
2025-08-28 00:41:52 [Information] Route matched with "{action = \"GetBalances\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBalances(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:41:52 [Information] Executed DbCommand ("3"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s1`.`Id`, `s1`.`CreatedAt`, `s1`.`CreatedById`, `s1`.`Name`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s2`.`Email`, `s2`.`Password`, `s2`.`Username`, `s3`.`Id`, `s3`.`CreatedAt`, `s3`.`Description`, `s3`.`PaidById`, `s3`.`SessionId`, `s3`.`TotalAmount`, `s3`.`Id0`, `s3`.`Amount`, `s3`.`ExpenseId`, `s3`.`Status`, `s3`.`UserId`
FROM (
    SELECT `s`.`Id`, `s`.`CreatedAt`, `s`.`CreatedById`, `s`.`Name`
    FROM `Sessions` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `s1`
LEFT JOIN (
    SELECT `s0`.`SessionId`, `s0`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
    FROM `Sessionusers` AS `s0`
    INNER JOIN `Users` AS `u` ON `s0`.`UserId` = `u`.`Id`
) AS `s2` ON `s1`.`Id` = `s2`.`SessionId`
LEFT JOIN (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id` AS `Id0`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
    FROM `Expenses` AS `e`
    LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
) AS `s3` ON `s1`.`Id` = `s3`.`SessionId`
ORDER BY `s1`.`Id`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s3`.`Id`"
2025-08-28 00:41:52 [Information] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.IOU.DTOs.BalanceDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 00:41:52 [Information] Executed action "Api.IOU.Controllers.ExpenseController.GetBalances (IOU)" in 14.9802ms
2025-08-28 00:41:52 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.GetBalances (IOU)"'
2025-08-28 00:41:52 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3/balances""" - 200 null "application/json; charset=utf-8" 28.4254ms
2025-08-28 00:44:26 [Information] Request starting "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/expenses""" - "application/json" 123
2025-08-28 00:44:26 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)"'
2025-08-28 00:44:26 [Information] Route matched with "{action = \"CreateExpense\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateExpense(Api.IOU.DTOs.AddExpenseDTO)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:44:26 [Information] Executed DbCommand ("2"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s1`.`Id`, `s1`.`CreatedAt`, `s1`.`CreatedById`, `s1`.`Name`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s2`.`Email`, `s2`.`Password`, `s2`.`Username`, `s3`.`Id`, `s3`.`CreatedAt`, `s3`.`Description`, `s3`.`PaidById`, `s3`.`SessionId`, `s3`.`TotalAmount`, `s3`.`Id0`, `s3`.`Amount`, `s3`.`ExpenseId`, `s3`.`Status`, `s3`.`UserId`
FROM (
    SELECT `s`.`Id`, `s`.`CreatedAt`, `s`.`CreatedById`, `s`.`Name`
    FROM `Sessions` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `s1`
LEFT JOIN (
    SELECT `s0`.`SessionId`, `s0`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
    FROM `Sessionusers` AS `s0`
    INNER JOIN `Users` AS `u` ON `s0`.`UserId` = `u`.`Id`
) AS `s2` ON `s1`.`Id` = `s2`.`SessionId`
LEFT JOIN (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id` AS `Id0`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
    FROM `Expenses` AS `e`
    LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
) AS `s3` ON `s1`.`Id` = `s3`.`SessionId`
ORDER BY `s1`.`Id`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s3`.`Id`"
2025-08-28 00:44:26 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = DateTime), @p1='?' (Size = 500), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Expenses` (`CreatedAt`, `Description`, `PaidById`, `SessionId`, `TotalAmount`)
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT `Id`
FROM `Expenses`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();"
2025-08-28 00:44:26 [Information] Executed DbCommand ("1"ms) [Parameters=["@p5='?' (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `ExpenseSplits` (`Amount`, `ExpenseId`, `Status`, `UserId`)
VALUES (@p5, @p6, @p7, @p8);
SELECT `Id`
FROM `ExpenseSplits`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `ExpenseSplits` (`Amount`, `ExpenseId`, `Status`, `UserId`)
VALUES (@p9, @p10, @p11, @p12);
SELECT `Id`
FROM `ExpenseSplits`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();"
2025-08-28 00:44:26 [Information] Expense with ID 6 created in session 3
2025-08-28 00:44:26 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseDTO"'.
2025-08-28 00:44:26 [Information] Executed action "Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)" in 22.5979ms
2025-08-28 00:44:26 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.CreateExpense (IOU)"'
2025-08-28 00:44:26 [Information] Request finished "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/expenses""" - 200 null "application/json; charset=utf-8" 29.0837ms
2025-08-28 00:44:40 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3""" - null null
2025-08-28 00:44:40 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)"'
2025-08-28 00:44:40 [Information] Route matched with "{action = \"GetExpensesBySession\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetExpensesBySession(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:44:40 [Information] Executed DbCommand ("1"ms) [Parameters=["@__sessionId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM `Expenses` AS `e`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
WHERE `e`.`SessionId` = @__sessionId_0
ORDER BY `e`.`Id`"
2025-08-28 00:44:40 [Information] Executing "OkObjectResult", writing value of type '"System.Linq.Enumerable+ListSelectIterator`2[[Api.IOU.Models.Expense, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Api.IOU.DTOs.ExpenseDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 00:44:40 [Information] Executed action "Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)" in 6.2885ms
2025-08-28 00:44:40 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.GetExpensesBySession (IOU)"'
2025-08-28 00:44:40 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3""" - 200 null "application/json; charset=utf-8" 13.0464ms
2025-08-28 00:44:56 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3/balances""" - null null
2025-08-28 00:44:56 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.GetBalances (IOU)"'
2025-08-28 00:44:56 [Information] Route matched with "{action = \"GetBalances\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBalances(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:44:56 [Information] Executed DbCommand ("3"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s1`.`Id`, `s1`.`CreatedAt`, `s1`.`CreatedById`, `s1`.`Name`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s2`.`Email`, `s2`.`Password`, `s2`.`Username`, `s3`.`Id`, `s3`.`CreatedAt`, `s3`.`Description`, `s3`.`PaidById`, `s3`.`SessionId`, `s3`.`TotalAmount`, `s3`.`Id0`, `s3`.`Amount`, `s3`.`ExpenseId`, `s3`.`Status`, `s3`.`UserId`
FROM (
    SELECT `s`.`Id`, `s`.`CreatedAt`, `s`.`CreatedById`, `s`.`Name`
    FROM `Sessions` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `s1`
LEFT JOIN (
    SELECT `s0`.`SessionId`, `s0`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
    FROM `Sessionusers` AS `s0`
    INNER JOIN `Users` AS `u` ON `s0`.`UserId` = `u`.`Id`
) AS `s2` ON `s1`.`Id` = `s2`.`SessionId`
LEFT JOIN (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id` AS `Id0`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
    FROM `Expenses` AS `e`
    LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
) AS `s3` ON `s1`.`Id` = `s3`.`SessionId`
ORDER BY `s1`.`Id`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s3`.`Id`"
2025-08-28 00:44:56 [Information] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.IOU.DTOs.BalanceDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 00:44:56 [Information] Executed action "Api.IOU.Controllers.ExpenseController.GetBalances (IOU)" in 17.0291ms
2025-08-28 00:44:56 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.GetBalances (IOU)"'
2025-08-28 00:44:56 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3/balances""" - 200 null "application/json; charset=utf-8" 28.2924ms
2025-08-28 00:45:14 [Information] Request starting "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - null 0
2025-08-28 00:45:14 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:14 [Information] Route matched with "{action = \"SettleSplit\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SettleSplit(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:45:14 [Information] Executed DbCommand ("2"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:45:14 [Information] Executed DbCommand ("1"ms) [Parameters=["@p4='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET AUTOCOMMIT = 1;
UPDATE `ExpenseSplits` SET `Amount` = @p0, `ExpenseId` = @p1, `Status` = @p2, `UserId` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();"
2025-08-28 00:45:14 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseSplitDTO"'.
2025-08-28 00:45:14 [Information] Executed action "Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)" in 22.5392ms
2025-08-28 00:45:14 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:14 [Information] Request finished "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - 200 null "application/json; charset=utf-8" 29.2895ms
2025-08-28 00:45:21 [Information] Request starting "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - null 0
2025-08-28 00:45:21 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:21 [Information] Route matched with "{action = \"SettleSplit\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SettleSplit(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:45:21 [Information] Executed DbCommand ("8"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:45:21 [Information] Executed DbCommand ("1"ms) [Parameters=["@p4='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET AUTOCOMMIT = 1;
UPDATE `ExpenseSplits` SET `Amount` = @p0, `ExpenseId` = @p1, `Status` = @p2, `UserId` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();"
2025-08-28 00:45:21 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseSplitDTO"'.
2025-08-28 00:45:21 [Information] Executed action "Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)" in 19.8708ms
2025-08-28 00:45:21 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:21 [Information] Request finished "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - 200 null "application/json; charset=utf-8" 28.8173ms
2025-08-28 00:45:21 [Information] Request starting "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - null 0
2025-08-28 00:45:21 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:21 [Information] Route matched with "{action = \"SettleSplit\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SettleSplit(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:45:21 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:45:21 [Information] Executed DbCommand ("1"ms) [Parameters=["@p4='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET AUTOCOMMIT = 1;
UPDATE `ExpenseSplits` SET `Amount` = @p0, `ExpenseId` = @p1, `Status` = @p2, `UserId` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();"
2025-08-28 00:45:21 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseSplitDTO"'.
2025-08-28 00:45:21 [Information] Executed action "Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)" in 9.5923ms
2025-08-28 00:45:21 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:21 [Information] Request finished "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - 200 null "application/json; charset=utf-8" 15.5179ms
2025-08-28 00:45:21 [Information] Request starting "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - null 0
2025-08-28 00:45:21 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:21 [Information] Route matched with "{action = \"SettleSplit\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SettleSplit(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:45:21 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:45:21 [Information] Executed DbCommand ("2"ms) [Parameters=["@p4='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET AUTOCOMMIT = 1;
UPDATE `ExpenseSplits` SET `Amount` = @p0, `ExpenseId` = @p1, `Status` = @p2, `UserId` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();"
2025-08-28 00:45:21 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseSplitDTO"'.
2025-08-28 00:45:21 [Information] Executed action "Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)" in 11.7808ms
2025-08-28 00:45:21 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:21 [Information] Request finished "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - 200 null "application/json; charset=utf-8" 17.657ms
2025-08-28 00:45:21 [Information] Request starting "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - null 0
2025-08-28 00:45:21 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:21 [Information] Route matched with "{action = \"SettleSplit\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SettleSplit(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:45:21 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:45:21 [Information] Executed DbCommand ("1"ms) [Parameters=["@p4='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET AUTOCOMMIT = 1;
UPDATE `ExpenseSplits` SET `Amount` = @p0, `ExpenseId` = @p1, `Status` = @p2, `UserId` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();"
2025-08-28 00:45:21 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseSplitDTO"'.
2025-08-28 00:45:21 [Information] Executed action "Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)" in 11.748ms
2025-08-28 00:45:21 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:21 [Information] Request finished "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - 200 null "application/json; charset=utf-8" 17.5345ms
2025-08-28 00:45:27 [Information] Request starting "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - null 0
2025-08-28 00:45:27 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:27 [Information] Route matched with "{action = \"SettleSplit\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SettleSplit(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:45:27 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:45:27 [Information] Executed DbCommand ("6"ms) [Parameters=["@p4='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET AUTOCOMMIT = 1;
UPDATE `ExpenseSplits` SET `Amount` = @p0, `ExpenseId` = @p1, `Status` = @p2, `UserId` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();"
2025-08-28 00:45:27 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseSplitDTO"'.
2025-08-28 00:45:27 [Information] Executed action "Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)" in 16.0095ms
2025-08-28 00:45:27 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:27 [Information] Request finished "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - 200 null "application/json; charset=utf-8" 23.5452ms
2025-08-28 00:45:29 [Information] Request starting "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - null 0
2025-08-28 00:45:29 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:29 [Information] Route matched with "{action = \"SettleSplit\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SettleSplit(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:45:29 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:45:29 [Information] Executed DbCommand ("1"ms) [Parameters=["@p4='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET AUTOCOMMIT = 1;
UPDATE `ExpenseSplits` SET `Amount` = @p0, `ExpenseId` = @p1, `Status` = @p2, `UserId` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();"
2025-08-28 00:45:29 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseSplitDTO"'.
2025-08-28 00:45:29 [Information] Executed action "Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)" in 11.0781ms
2025-08-28 00:45:29 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:29 [Information] Request finished "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - 200 null "application/json; charset=utf-8" 17.9972ms
2025-08-28 00:45:30 [Information] Request starting "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - null 0
2025-08-28 00:45:30 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:30 [Information] Route matched with "{action = \"SettleSplit\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SettleSplit(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:45:30 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:45:30 [Information] Executed DbCommand ("1"ms) [Parameters=["@p4='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET AUTOCOMMIT = 1;
UPDATE `ExpenseSplits` SET `Amount` = @p0, `ExpenseId` = @p1, `Status` = @p2, `UserId` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();"
2025-08-28 00:45:30 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseSplitDTO"'.
2025-08-28 00:45:30 [Information] Executed action "Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)" in 10.053ms
2025-08-28 00:45:30 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:30 [Information] Request finished "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/5/settle""" - 200 null "application/json; charset=utf-8" 15.964ms
2025-08-28 00:45:43 [Information] Request starting "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/6/settle""" - null 0
2025-08-28 00:45:43 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:43 [Information] Route matched with "{action = \"SettleSplit\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SettleSplit(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:45:43 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `e1`.`Id`, `e1`.`CreatedAt`, `e1`.`Description`, `e1`.`PaidById`, `e1`.`SessionId`, `e1`.`TotalAmount`, `e0`.`Id`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
FROM (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`
    FROM `Expenses` AS `e`
    WHERE `e`.`Id` = @__id_0
    LIMIT 1
) AS `e1`
LEFT JOIN `ExpenseSplits` AS `e0` ON `e1`.`Id` = `e0`.`ExpenseId`
ORDER BY `e1`.`Id`"
2025-08-28 00:45:43 [Information] Executed DbCommand ("8"ms) [Parameters=["@p4='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET AUTOCOMMIT = 1;
UPDATE `ExpenseSplits` SET `Amount` = @p0, `ExpenseId` = @p1, `Status` = @p2, `UserId` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();"
2025-08-28 00:45:43 [Information] Executing "OkObjectResult", writing value of type '"Api.IOU.DTOs.ExpenseSplitDTO"'.
2025-08-28 00:45:43 [Information] Executed action "Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)" in 17.3909ms
2025-08-28 00:45:43 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.SettleSplit (IOU)"'
2025-08-28 00:45:43 [Information] Request finished "HTTP/1.1" "PUT" "http"://"localhost:5062""""/api/expenses/6/settle""" - 200 null "application/json; charset=utf-8" 23.25ms
2025-08-28 00:45:47 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3/balances""" - null null
2025-08-28 00:45:47 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.GetBalances (IOU)"'
2025-08-28 00:45:47 [Information] Route matched with "{action = \"GetBalances\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBalances(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:45:47 [Information] Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s1`.`Id`, `s1`.`CreatedAt`, `s1`.`CreatedById`, `s1`.`Name`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s2`.`Email`, `s2`.`Password`, `s2`.`Username`, `s3`.`Id`, `s3`.`CreatedAt`, `s3`.`Description`, `s3`.`PaidById`, `s3`.`SessionId`, `s3`.`TotalAmount`, `s3`.`Id0`, `s3`.`Amount`, `s3`.`ExpenseId`, `s3`.`Status`, `s3`.`UserId`
FROM (
    SELECT `s`.`Id`, `s`.`CreatedAt`, `s`.`CreatedById`, `s`.`Name`
    FROM `Sessions` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `s1`
LEFT JOIN (
    SELECT `s0`.`SessionId`, `s0`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
    FROM `Sessionusers` AS `s0`
    INNER JOIN `Users` AS `u` ON `s0`.`UserId` = `u`.`Id`
) AS `s2` ON `s1`.`Id` = `s2`.`SessionId`
LEFT JOIN (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id` AS `Id0`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
    FROM `Expenses` AS `e`
    LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
) AS `s3` ON `s1`.`Id` = `s3`.`SessionId`
ORDER BY `s1`.`Id`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s3`.`Id`"
2025-08-28 00:45:47 [Information] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.IOU.DTOs.BalanceDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 00:45:47 [Information] Executed action "Api.IOU.Controllers.ExpenseController.GetBalances (IOU)" in 6.9853ms
2025-08-28 00:45:47 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.GetBalances (IOU)"'
2025-08-28 00:45:47 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3/balances""" - 200 null "application/json; charset=utf-8" 12.9799ms
2025-08-28 00:45:48 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3/balances""" - null null
2025-08-28 00:45:48 [Information] Executing endpoint '"Api.IOU.Controllers.ExpenseController.GetBalances (IOU)"'
2025-08-28 00:45:48 [Information] Route matched with "{action = \"GetBalances\", controller = \"Expense\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBalances(Int32)" on controller "Api.IOU.Controllers.ExpenseController" ("IOU").
2025-08-28 00:45:48 [Information] Executed DbCommand ("2"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT `s1`.`Id`, `s1`.`CreatedAt`, `s1`.`CreatedById`, `s1`.`Name`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s2`.`Email`, `s2`.`Password`, `s2`.`Username`, `s3`.`Id`, `s3`.`CreatedAt`, `s3`.`Description`, `s3`.`PaidById`, `s3`.`SessionId`, `s3`.`TotalAmount`, `s3`.`Id0`, `s3`.`Amount`, `s3`.`ExpenseId`, `s3`.`Status`, `s3`.`UserId`
FROM (
    SELECT `s`.`Id`, `s`.`CreatedAt`, `s`.`CreatedById`, `s`.`Name`
    FROM `Sessions` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `s1`
LEFT JOIN (
    SELECT `s0`.`SessionId`, `s0`.`UserId`, `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
    FROM `Sessionusers` AS `s0`
    INNER JOIN `Users` AS `u` ON `s0`.`UserId` = `u`.`Id`
) AS `s2` ON `s1`.`Id` = `s2`.`SessionId`
LEFT JOIN (
    SELECT `e`.`Id`, `e`.`CreatedAt`, `e`.`Description`, `e`.`PaidById`, `e`.`SessionId`, `e`.`TotalAmount`, `e0`.`Id` AS `Id0`, `e0`.`Amount`, `e0`.`ExpenseId`, `e0`.`Status`, `e0`.`UserId`
    FROM `Expenses` AS `e`
    LEFT JOIN `ExpenseSplits` AS `e0` ON `e`.`Id` = `e0`.`ExpenseId`
) AS `s3` ON `s1`.`Id` = `s3`.`SessionId`
ORDER BY `s1`.`Id`, `s2`.`SessionId`, `s2`.`UserId`, `s2`.`Id`, `s3`.`Id`"
2025-08-28 00:45:48 [Information] Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[Api.IOU.DTOs.BalanceDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 00:45:48 [Information] Executed action "Api.IOU.Controllers.ExpenseController.GetBalances (IOU)" in 18.4813ms
2025-08-28 00:45:48 [Information] Executed endpoint '"Api.IOU.Controllers.ExpenseController.GetBalances (IOU)"'
2025-08-28 00:45:48 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/expenses/session/3/balances""" - 200 null "application/json; charset=utf-8" 34.9124ms
2025-08-28 00:52:29 [Information] Application is shutting down...
2025-08-28 22:24:56 [Information] User profile is available. Using '"C:\Users\Dioni\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 22:24:56 [Information] Now listening on: "http://localhost:5062"
2025-08-28 22:24:56 [Information] Application started. Press Ctrl+C to shut down.
2025-08-28 22:24:56 [Information] Hosting environment: "Development"
2025-08-28 22:24:56 [Information] Content root path: "C:\Users\Dioni\OneDrive\Desktop\Projects\IOU\api\iou"
2025-08-28 22:25:30 [Information] Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5062""""/api/user/register""" - null null
2025-08-28 22:25:30 [Warning] Failed to determine the https port for redirect.
2025-08-28 22:25:31 [Information] Executing endpoint '"405 HTTP Method Not Supported"'
2025-08-28 22:25:31 [Information] Executed endpoint '"405 HTTP Method Not Supported"'
2025-08-28 22:25:31 [Information] Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5062""""/api/user/register""" - 405 0 null 89.3995ms
2025-08-28 22:26:24 [Information] Application is shutting down...
2025-08-28 22:27:07 [Information] User profile is available. Using '"C:\Users\Dioni\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 22:27:07 [Information] Now listening on: "http://localhost:5062"
2025-08-28 22:27:07 [Information] Application started. Press Ctrl+C to shut down.
2025-08-28 22:27:07 [Information] Hosting environment: "Development"
2025-08-28 22:27:07 [Information] Content root path: "C:\Users\Dioni\OneDrive\Desktop\Projects\IOU\api\iou"
2025-08-28 22:27:50 [Information] Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5062""""/api/user/register""" - null null
2025-08-28 22:27:50 [Warning] Failed to determine the https port for redirect.
2025-08-28 22:27:50 [Information] Executing endpoint '"405 HTTP Method Not Supported"'
2025-08-28 22:27:50 [Information] Executed endpoint '"405 HTTP Method Not Supported"'
2025-08-28 22:27:50 [Information] Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5062""""/api/user/register""" - 405 0 null 61.7995ms
2025-08-28 22:28:51 [Information] Application is shutting down...
2025-08-28 22:28:56 [Information] User profile is available. Using '"C:\Users\Dioni\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 22:28:56 [Information] Now listening on: "http://localhost:5062"
2025-08-28 22:28:56 [Information] Application started. Press Ctrl+C to shut down.
2025-08-28 22:28:56 [Information] Hosting environment: "Development"
2025-08-28 22:28:56 [Information] Content root path: "C:\Users\Dioni\OneDrive\Desktop\Projects\IOU\api\iou"
2025-08-28 22:29:17 [Information] Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:5062""""/api/user/register""" - null null
2025-08-28 22:29:17 [Warning] Failed to determine the https port for redirect.
2025-08-28 22:29:17 [Information] CORS policy execution successful.
2025-08-28 22:29:17 [Information] Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:5062""""/api/user/register""" - 204 null null 51.3341ms
2025-08-28 22:29:17 [Information] Request starting "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/user/register""" - "application/json" 100
2025-08-28 22:29:17 [Information] CORS policy execution successful.
2025-08-28 22:29:17 [Information] Executing endpoint '"Api.IOU.Controllers.UserController.Register (IOU)"'
2025-08-28 22:29:17 [Information] Route matched with "{action = \"Register\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Api.IOU.DTOs.UserRegisterDTO)" on controller "Api.IOU.Controllers.UserController" ("IOU").
2025-08-28 22:29:18 [Information] Executed DbCommand ("51"ms) [Parameters=["@__username_0='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SELECT `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
FROM `Users` AS `u`
WHERE `u`.`Username` = @__username_0
LIMIT 1"
2025-08-28 22:29:18 [Information] Executed DbCommand ("1"ms) [Parameters=["@__email_0='?' (Size = 225)"], CommandType='Text', CommandTimeout='30']"
""SELECT `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
FROM `Users` AS `u`
WHERE `u`.`Email` = @__email_0
LIMIT 1"
2025-08-28 22:29:19 [Information] Executed DbCommand ("12"ms) [Parameters=["@p0='?' (Size = 225), @p1='?' (Size = 255), @p2='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO `Users` (`Email`, `Password`, `Username`)
VALUES (@p0, @p1, @p2);
SELECT `Id`
FROM `Users`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();"
2025-08-28 22:29:19 [Information] User "frontendrequest" registered successfully at 08/28/2025 19:29:19
2025-08-28 22:29:19 [Information] Executing "CreatedAtActionResult", writing value of type '"Api.IOU.DTOs.UserDTO"'.
2025-08-28 22:29:19 [Information] Executed action "Api.IOU.Controllers.UserController.Register (IOU)" in 1991.8057ms
2025-08-28 22:29:19 [Information] Executed endpoint '"Api.IOU.Controllers.UserController.Register (IOU)"'
2025-08-28 22:29:19 [Information] Request finished "HTTP/1.1" "POST" "http"://"localhost:5062""""/api/user/register""" - 201 null "application/json; charset=utf-8" 2027.7478ms
2025-08-28 22:29:49 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/swagger/v1/swagger.json""" - null null
2025-08-28 22:29:49 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/swagger/v1/swagger.json""" - 200 null "application/json;charset=utf-8" 96.9428ms
2025-08-28 22:29:55 [Information] Request starting "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/user""" - null null
2025-08-28 22:29:55 [Information] Executing endpoint '"Api.IOU.Controllers.UserController.GetAll (IOU)"'
2025-08-28 22:29:55 [Information] Route matched with "{action = \"GetAll\", controller = \"User\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll()" on controller "Api.IOU.Controllers.UserController" ("IOU").
2025-08-28 22:29:55 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT `u`.`Id`, `u`.`Email`, `u`.`Password`, `u`.`Username`
FROM `Users` AS `u`"
2025-08-28 22:29:55 [Information] Executing "OkObjectResult", writing value of type '"System.Linq.Enumerable+ListSelectIterator`2[[Api.IOU.Models.User, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Api.IOU.DTOs.UserDTO, IOU, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-08-28 22:29:55 [Information] Executed action "Api.IOU.Controllers.UserController.GetAll (IOU)" in 37.9249ms
2025-08-28 22:29:55 [Information] Executed endpoint '"Api.IOU.Controllers.UserController.GetAll (IOU)"'
2025-08-28 22:29:55 [Information] Request finished "HTTP/1.1" "GET" "http"://"localhost:5062""""/api/user""" - 200 null "application/json; charset=utf-8" 50.4827ms
2025-08-28 22:30:09 [Information] Application is shutting down...
